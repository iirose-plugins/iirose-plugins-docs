# 服务器事件与通用指令

本文档记录了客户端可以接收到的服务器主动推送事件，以及可以向服务器发送的通用查询指令和其响应格式。

## 被动接收的服务器事件

这类事件由服务器在特定条件触发时主动推送给客户端。

### 用户进入房间
- **触发时机**: 当有新用户进入客户端所在的房间时。

#### 接收格式
```log
"1762613707>cartoon/600264>anata baka？>'1>s>d28ad2>2>>68af217fea585>''42'3'0,0,0.5>>15fdcb9b634621'n''''
```

标志：`>'1`

### 用户离开房间
- **触发时机**: 当有用户离开客户端所在的房间时。

#### 接收格式
```log
"1762613684>cartoon/600264>anata baka？>'25ce6a4b520a90>s>d28ad2>2>>68af217fea585>''42'3'0,0,0.5>>35ce6a4b520a90
```
标志：`>'2`

末尾的`>35ce6a4b520a90`代表`>3`+`5ce6a4b520a90`，即前往了`5ce6a4b520a90`房间。如果不存在跳转房间信息，则说明是直接下线。

## 主动查询指令与响应

这类交互由客户端主动发起一个简单的指令，服务器则会返回相应的数据。

### 内容获取

#### 获取自身账号信息
- **请求指令**:
  ```log
  $1
  ```
- **响应格式**:
  ```log
  $?1"上学" 19111171@qq.com""""2"""""""614530"http://r.iirose.com/i/24/10/11/17/4017-4V.jpg"679a51f1d4893"""""""""0上学<1上学"0""11111118514"
  ```

#### 获取朋友圈内容
- **请求指令**:
  ```log
  :=
  ```
- **响应格式 (朋友圈为空)**:
  ```log
  :=
  ```
- **响应格式**:
  ```log
  :=上学>http://r.iirose.com/i/24/10/11/17/4017-4V.jpg>2>614530测试朋友圈>>1762600961>1623500378723>614530>679a51f1d4893
  ```

#### 获取排行榜内容
- **请求指令**:
  ```log
  =-#
  ```
- **响应格式**:
  ```log
  `#1762414402"云>0>http://r.iirose.com/i/25/8/28/1/4452-UF.jpg>ff9900>http://r.iirose.com/i/25/10/14/10/1334-WF.jpg>63b64e5dbd19c>99<收获蚁>1>>491f13>http://r.iirose.com/i/25/7/16/13/4647-MH.jpg>5b5f31bef359f>5<...........
  ```

#### 获取商城内容
- **请求指令**:
  ```log
  g-
  ```
- **响应格式**:
  ```log
  g-62474e8e6d30c>://r.iirose.com/i/22/4/2/3/0841-QK.png>星吟旗舰店>0>0,1,99>认真做团队,服务于大家>本店铺为星吟团队所属未经允许禁止转载或使用星吟的名字或标识违者追究版权费>://r.iirose.com/i/22/4/4/19/2932-6K.jpg>1648840334>://r.iirose.com/i/22/3/27/17/3928-9O.png ://r.iirose.com/i/22/4/2/3/1122-Y2.png>648>9900ff>服务_其他>星吟品牌旗舰店>https://music.163.com/song/media/outer/url?id=1431292823.mp3 https://p3.music.126.net/EIJc2Wt5AEsIHCFcVxm6pg==/109951165033567317.jpg@|夜航星 (Night Voyager)@|不才  &  三体宇宙@|0@|://music.163.com/#/song?id=1431292823>..........
  ```

#### 获取论坛内容
- **请求指令**:
  ```log
  :-
  ```
- **响应格式**:
  ```log
  :-Haise>http://r.iirose.com/i/21/10/30/21/5231-2X.png>0>69b4bc永远的10.2>>1759831248>1481167773646>69b4bc<塔罗会-世界-狂怒>http://r.iirose.com/i/25/4/19/0/5825-05.jpg>1>539dc9[@1481167773646][http://i01piccdn.sogoucdn.com/17dae5a3326311e8#.jpg#e]>>1759837746>1456580949791>539dc9<……… ………>http://r.iirose.com/i/25/..........
  ```

#### 获取任务内容
- **请求指令**:
  ```log
  :+
  ```
- **响应格式**:
  ```log
  :+腿浅花>http://r.iirose.com/i/25/10/24/21/3146-WZ.jpg>0>e7fbb4[http://r.iirose.com/i/25/10/8/1/1636-DG.jpg]>http://r.iirose.com/i/24/9/3/7/2417-YE.jpg>1759857457>1572632394146>什么蜂>10>>e7fbb4<miku>http://r.iirose.com/i/25/11/4/22/0424-9T.jpg>0>2a2a2a[@1572632394146]哈基蜂>http://r.iirose.com/i/24/7/9/22/4904-GI.jpg>1759913019>1191855813477>>>>707070<miku>http://r.iirose.com/i/25/11/4/22/0424-9T.jpg>0>2a2a2a每当有人资助我一钞我就跑一米(keep帮我计数)>http://r.iirose.com/i/24/7/9/22/4904-GI.jpg>1759913296>1957236687914>1个钞跑1米>1>>707070<腿浅花>http://r.iirose.com/i/25/10/24/21/3146-WZ.jpg>0>e7fbb4我们是什么>http://r.iirose.com/i/...........
  ```

### 交互式指令

#### 随机骰子
:::tip 用法
客户端发送 `)@` 加上 `0` 到 `7` 之间的一个数字，会触发对应数字的官方机器人在公屏回复一个随机数字。
:::
- **请求指令 (示例)**:
  ```log
  )@0
  ```
- **响应格式 (由机器人公屏回复)**:
  ```log
  "1762415328>system/901007>艾B> [*上学*]    :   7995>7e7e7e>7e7e7e>2>>5eb9344c0cb93>c伴你左右''0'0'0,0,0.5>690c52e0353e8