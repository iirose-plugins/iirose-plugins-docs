import{_ as s,z as i,m as a,ap as e}from"./chunks/framework.Dj65yJjF.js";const r=JSON.parse('{"title":"登录流程","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/iirose/dev/login.md","filePath":"markdown/iirose/dev/login.md","lastUpdated":1762619484000}'),l={name:"markdown/iirose/dev/login.md"};function n(d,t,h,k,p,o){return a(),i("div",null,[...t[0]||(t[0]=[e('<h1 id="登录流程" tabindex="-1">登录流程 <a class="header-anchor" href="#登录流程" aria-label="Permalink to &quot;登录流程&quot;">​</a></h1><p>当 WebSocket 连接成功建立后，客户端必须发送的第一个报文就是登录报文，以完成身份验证。</p><h2 id="_1-登录报文格式" tabindex="-1">1. 登录报文格式 <a class="header-anchor" href="#_1-登录报文格式" aria-label="Permalink to &quot;1. 登录报文格式&quot;">​</a></h2><p>登录报文是一个以 <code>*</code> 开头的 JSON 字符串。</p><div class="language-log vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">*{</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;房间ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;用户名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,...}</span></span></code></pre></div><p>该 JSON 对象包含了登录所需的所有信息。IIROSE 支持“账号登录”和“游客登录”两种模式。</p><h3 id="账号登录" tabindex="-1">账号登录 <a class="header-anchor" href="#账号登录" aria-label="Permalink to &quot;账号登录&quot;">​</a></h3><p>这是标准的登录方式，需要用户名和密码。</p><h4 id="核心字段" tabindex="-1">核心字段 <a class="header-anchor" href="#核心字段" aria-label="Permalink to &quot;核心字段&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">类型</th><th style="text-align:left;">必需</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>r</code></td><td style="text-align:left;">string</td><td style="text-align:left;">是</td><td style="text-align:left;">要进入的房间ID。</td></tr><tr><td style="text-align:left;"><code>n</code></td><td style="text-align:left;">string</td><td style="text-align:left;">是</td><td style="text-align:left;">你的机器人账号用户名。</td></tr><tr><td style="text-align:left;"><code>p</code></td><td style="text-align:left;">string</td><td style="text-align:left;">是</td><td style="text-align:left;">密码的32位小写MD5哈希值。</td></tr><tr><td style="text-align:left;"><code>lr</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">旧房间地址（用于切换房间的重新登录）</td></tr><tr><td style="text-align:left;"><code>st</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">账号状态，例如在线、挂机中等。</td></tr><tr><td style="text-align:left;"><code>mo</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">账号个性签名。</td></tr><tr><td style="text-align:left;"><code>mb</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>mu</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">01</td></tr><tr><td style="text-align:left;"><code>vc</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">版本号</td></tr><tr><td style="text-align:left;"><code>rp</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">房间密码。 如果目标房间是加密房间，需要提供此字段。</td></tr><tr><td style="text-align:left;"><code>fp</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;"><code>@{md5(用户名)}</code> 的格式。用户名的32位小写MD5哈希值。</td></tr></tbody></table><h4 id="示例报文-直接登录" tabindex="-1">示例报文 - 直接登录 <a class="header-anchor" href="#示例报文-直接登录" aria-label="Permalink to &quot;示例报文 - 直接登录&quot;">​</a></h4><div class="language-log vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">*{</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;5ce6a4b520a90&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;anata baka？&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;p&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cccaa43514a6c9ee76ed051184efd33f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;st&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;vc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1142&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;@efb4eedb61f61939ba87855987e5751d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h4 id="示例报文-切换房间" tabindex="-1">示例报文 - 切换房间 <a class="header-anchor" href="#示例报文-切换房间" aria-label="Permalink to &quot;示例报文 - 切换房间&quot;">​</a></h4><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>切换房间是一种特殊的登录模式，需要提供 <code>lr</code> 字段（lastroom）。</p><p>详见后文的 <a href="./actions.html#切换房间">切换房间</a></p></div><div class="language-log vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">*{</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;5ce6a4b520a90&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;上学&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;p&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cccaa43514a6c9ee76ed051184efd33f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;lr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;5fdcb9b634621&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;st&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;vc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1142&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;@efb4eedb61f61939ba87855987e5751d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="游客登录" tabindex="-1">游客登录 <a class="header-anchor" href="#游客登录" aria-label="Permalink to &quot;游客登录&quot;">​</a></h3><p>如果不想使用固定账号，可以选择游客模式登录。</p><h4 id="核心字段-1" tabindex="-1">核心字段 <a class="header-anchor" href="#核心字段-1" aria-label="Permalink to &quot;核心字段&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">类型</th><th style="text-align:left;">必需</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>r</code></td><td style="text-align:left;">string</td><td style="text-align:left;">是</td><td style="text-align:left;">要进入的房间ID。</td></tr><tr><td style="text-align:left;"><code>n</code></td><td style="text-align:left;">string</td><td style="text-align:left;">是</td><td style="text-align:left;">游客昵称。</td></tr><tr><td style="text-align:left;"><code>i</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">游客头像。例如 <code>cartoon/600215</code>。</td></tr><tr><td style="text-align:left;"><code>nc</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">昵称颜色，十六进制，如 <code>3d5d58</code>。</td></tr><tr><td style="text-align:left;"><code>s</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">性别。</td></tr><tr><td style="text-align:left;"><code>st</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">n</td></tr><tr><td style="text-align:left;"><code>mo</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">账号个性签名。</td></tr><tr><td style="text-align:left;"><code>uid</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">唯一的游客标识符。</td></tr><tr><td style="text-align:left;"><code>li</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>mb</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>mu</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">01</td></tr><tr><td style="text-align:left;"><code>la</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">语言</td></tr><tr><td style="text-align:left;"><code>vc</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">版本号</td></tr><tr><td style="text-align:left;"><code>fp</code></td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;"><code>@{md5(游客昵称)}</code> 的格式。</td></tr></tbody></table><h4 id="示例报文" tabindex="-1">示例报文 <a class="header-anchor" href="#示例报文" aria-label="Permalink to &quot;示例报文&quot;">​</a></h4><div class="language-log vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">*{</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;5ce6a4b520a90&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;yokumo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;i&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;anime/234&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;nc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ac81a2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;s&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;st&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;uid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;X608860379861&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;li&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;032003330934&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;la&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;RU&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;vc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1142&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;@efb4eedb61f61939ba87855987e5751d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h2 id="_2-登录响应" tabindex="-1">2. 登录响应 <a class="header-anchor" href="#_2-登录响应" aria-label="Permalink to &quot;2. 登录响应&quot;">​</a></h2><p>服务器在收到登录请求后，会返回一条以 <code>%*</code> 开头的消息作为响应，告知登录结果。</p><h3 id="登录成功" tabindex="-1">登录成功 <a class="header-anchor" href="#登录成功" aria-label="Permalink to &quot;登录成功&quot;">​</a></h3><p>如果登录成功，服务器返回的报文通常会直接开始推送房间的初始数据，例如：</p><div class="language-log vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%*&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">http://r.iirose.com/i/25/5/30/10/1326-7X.png&gt;2&gt;白狐IDea&gt;ffffff&gt;63a882551d807&gt;n&gt;&gt;&gt;5d918932ed1ed&gt;&gt;http://r.iirose.com/i/25/2/5/2/1900-08.png&gt;&gt;&gt;27707&gt;240&gt;16,98.3,0.5&lt;https://xc.null.red:8043/XCimg/img/save/2025/08/28/blob-282839853#.jpg#e&gt;1&gt;九月&gt;748485&gt;63cb7ebc91945&gt;n&gt;无趣是原罪&gt;&gt;5e5bda2ac5b37&gt;&gt;http://r.iirose.com/i/22/12/10/23/3818-1B.jpg&gt;4&gt;0唯有月亮像一个梦🌒&gt;28784&gt;2063&gt;127,83.4,1.56&lt;http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.....................</span></span></code></pre></div><p>这条消息包含了股价信息、在线用户列表、频道列表、当前频道历史消息、当前播放歌单数据等数据。</p><p>这是一个超级大的初始化数据包（大约670kb），用于用户登陆成功之后的前端渲染。</p><p>下一篇我们将讲解如何解析此包。</p><h3 id="登录失败" tabindex="-1">登录失败 <a class="header-anchor" href="#登录失败" aria-label="Permalink to &quot;登录失败&quot;">​</a></h3><p>如果登录失败，服务器会返回一个特定的错误代码。</p><table tabindex="0"><thead><tr><th style="text-align:left;">错误报文</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;"><code>%*&quot;0</code></td><td style="text-align:left;"><strong>名字被占用</strong>：通常发生在游客登录时，选择的昵称已被房间内其他人使用。</td></tr><tr><td style="text-align:left;"><code>%*&quot;1</code></td><td style="text-align:left;"><strong>用户名不存在</strong>：账号登录时，提供的用户名未注册。</td></tr><tr><td style="text-align:left;"><code>%*&quot;2</code></td><td style="text-align:left;"><strong>密码错误</strong>：账号登录时，提供的密码MD5不正确。</td></tr><tr><td style="text-align:left;"><code>%*&quot;4</code></td><td style="text-align:left;"><strong>登录次数过多</strong>：该IP今日尝试登录的次数已达上限。</td></tr><tr><td style="text-align:left;"><code>%*&quot;5</code></td><td style="text-align:left;"><strong>房间密码错误</strong>：进入加密房间时，提供的房间密码不正确。</td></tr><tr><td style="text-align:left;"><code>%*&quot;x</code></td><td style="text-align:left;"><strong>用户被封禁</strong>：该账号已被系统封禁。</td></tr><tr><td style="text-align:left;"><code>%*&quot;n0</code></td><td style="text-align:left;"><strong>房间无法进入</strong>：可能因为房间已满、仅白名单可入等原因。</td></tr></tbody></table><p>在收到任何登录失败的报文后，客户端应断开连接并向用户提示相应的错误信息。</p>',33)])])}const y=s(l,[["render",n]]);export{r as __pageData,y as default};
